;var serviceUrl='/s%C3%B6k/';var questionsUrl='/fr%C3%A5gor/';var answersUrl='/svar/';var tagsUrl='/taggar/';var partiesUrl='/partier/';var quizzesUrl='/quiz/';;var autoComplete=(function(){function autoComplete(options){if(!document.querySelector)return;function hasClass(el,className){return el.classList?el.classList.contains(className):new RegExp('\\b'+className+'\\b').test(el.className);}
function addEvent(el,type,handler){if(el.attachEvent)el.attachEvent('on'+type,handler);else el.addEventListener(type,handler);}
function removeEvent(el,type,handler){if(el.detachEvent)el.detachEvent('on'+type,handler);else el.removeEventListener(type,handler);}
function live(elClass,event,cb,context){addEvent(context||document,event,function(e){var found,el=e.target||e.srcElement;while(el&&!(found=hasClass(el,elClass)))el=el.parentElement;if(found)cb.call(el,e);});}
var o={selector:0,source:0,minChars:3,delay:150,offsetLeft:0,offsetTop:1,cache:1,menuClass:'',renderItem:function(item,search){search=search.replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&');var re=new RegExp("("+search.split(' ').join('|')+")","gi");return'<div class="autocomplete-suggestion" data-val="'+item+'">'+item.replace(re,"<b>$1</b>")+'</div>';},onSelect:function(e,term,item){}};for(var k in options){if(options.hasOwnProperty(k))o[k]=options[k];}
var elems=typeof o.selector=='object'?[o.selector]:document.querySelectorAll(o.selector);for(var i=0;i<elems.length;i++){var that=elems[i];that.sc=document.createElement('div');that.sc.className='autocomplete-suggestions '+o.menuClass;that.autocompleteAttr=that.getAttribute('autocomplete');that.setAttribute('autocomplete','off');that.cache={};that.last_val='';that.updateSC=function(resize,next){var rect=that.getBoundingClientRect();that.sc.style.left=Math.round(rect.left+(window.pageXOffset||document.documentElement.scrollLeft)+o.offsetLeft)+'px';that.sc.style.top=Math.round(rect.bottom+(window.pageYOffset||document.documentElement.scrollTop)+o.offsetTop)+'px';that.sc.style.width=Math.round(rect.right-rect.left)+'px';if(!resize){that.sc.style.display='block';if(!that.sc.maxHeight){that.sc.maxHeight=parseInt((window.getComputedStyle?getComputedStyle(that.sc,null):that.sc.currentStyle).maxHeight);}
if(!that.sc.suggestionHeight)that.sc.suggestionHeight=that.sc.querySelector('.autocomplete-suggestion').offsetHeight;if(that.sc.suggestionHeight)
if(!next)that.sc.scrollTop=0;else{var scrTop=that.sc.scrollTop,selTop=next.getBoundingClientRect().top-that.sc.getBoundingClientRect().top;if(selTop+that.sc.suggestionHeight-that.sc.maxHeight>0)
that.sc.scrollTop=selTop+that.sc.suggestionHeight+scrTop-that.sc.maxHeight;else if(selTop<0)
that.sc.scrollTop=selTop+scrTop;}}}
addEvent(window,'resize',that.updateSC);document.body.appendChild(that.sc);live('autocomplete-suggestion','mouseleave',function(e){var sel=that.sc.querySelector('.autocomplete-suggestion.selected');if(sel)setTimeout(function(){sel.className=sel.className.replace('selected','');},20);},that.sc);live('autocomplete-suggestion','mouseover',function(e){var sel=that.sc.querySelector('.autocomplete-suggestion.selected');if(sel)sel.className=sel.className.replace('selected','');this.className+=' selected';},that.sc);live('autocomplete-suggestion','mousedown',function(e){if(hasClass(this,'autocomplete-suggestion')){var v=this.getAttribute('data-val');that.value=v;o.onSelect(e,v,this);that.sc.style.display='none';}},that.sc);that.blurHandler=function(){try{var over_sb=document.querySelector('.autocomplete-suggestions:hover');}catch(e){var over_sb=0;}
if(!over_sb){that.last_val=that.value;that.sc.style.display='none';setTimeout(function(){that.sc.style.display='none';},350);}else if(that!==document.activeElement)setTimeout(function(){that.focus();},20);};addEvent(that,'blur',that.blurHandler);var suggest=function(data){var val=that.value;that.cache[val]=data;if(data.length&&val.length>=o.minChars){var s='';for(var i=0;i<data.length;i++)s+=o.renderItem(data[i],val);that.sc.innerHTML=s;that.updateSC(0);}
else
that.sc.style.display='none';}
that.keydownHandler=function(e){var key=window.event?e.keyCode:e.which;if((key==40||key==38)&&that.sc.innerHTML){var next,sel=that.sc.querySelector('.autocomplete-suggestion.selected');if(!sel){next=(key==40)?that.sc.querySelector('.autocomplete-suggestion'):that.sc.childNodes[that.sc.childNodes.length-1];next.className+=' selected';that.value=next.getAttribute('data-val');}else{next=(key==40)?sel.nextSibling:sel.previousSibling;if(next){sel.className=sel.className.replace('selected','');next.className+=' selected';that.value=next.getAttribute('data-val');}
else{sel.className=sel.className.replace('selected','');that.value=that.last_val;next=0;}}
that.updateSC(0,next);return false;}
else if(key==27){that.value=that.last_val;that.sc.style.display='none';}
else if(key==13||key==9){var sel=that.sc.querySelector('.autocomplete-suggestion.selected');if(sel&&that.sc.style.display!='none'){o.onSelect(e,sel.getAttribute('data-val'),sel);setTimeout(function(){that.sc.style.display='none';},20);}}};addEvent(that,'keydown',that.keydownHandler);that.keyupHandler=function(e){var key=window.event?e.keyCode:e.which;if(!key||(key<35||key>40)&&key!=13&&key!=27){var val=that.value;if(val.length>=o.minChars){if(val!=that.last_val){that.last_val=val;clearTimeout(that.timer);if(o.cache){if(val in that.cache){suggest(that.cache[val]);return;}
for(var i=1;i<val.length-o.minChars;i++){var part=val.slice(0,val.length-i);if(part in that.cache&&!that.cache[part].length){suggest([]);return;}}}
that.timer=setTimeout(function(){o.source(val,suggest)},o.delay);}}else{that.last_val=val;that.sc.style.display='none';}}};addEvent(that,'keyup',that.keyupHandler);that.focusHandler=function(e){that.last_val='\n';that.keyupHandler(e)};if(!o.minChars)addEvent(that,'focus',that.focusHandler);}
this.destroy=function(){for(var i=0;i<elems.length;i++){var that=elems[i];removeEvent(window,'resize',that.updateSC);removeEvent(that,'blur',that.blurHandler);removeEvent(that,'focus',that.focusHandler);removeEvent(that,'keydown',that.keydownHandler);removeEvent(that,'keyup',that.keyupHandler);if(that.autocompleteAttr)
that.setAttribute('autocomplete',that.autocompleteAttr);else
that.removeAttribute('autocomplete');document.body.removeChild(that.sc);that=null;}};}
return autoComplete;})();(function(){if(typeof define==='function'&&define.amd)
define('autoComplete',function(){return autoComplete;});else if(typeof module!=='undefined'&&module.exports)
module.exports=autoComplete;else
window.autoComplete=autoComplete;})();;var splitText=function(text,term){var pos=text.toLowerCase().indexOf(term);if(pos===0){var rem=text.slice(term.length);return'<span class="term">'+term+'</span><span>'+rem+'</span>';}else if(pos===text.length-term.length){var rem=text.slice(0,text.length-term.length);return'<span>'+rem+'</span><span class="term">'+term+'</span>';}else if(pos===-1){return'<span>'+text+'</span>';}else{var start=text.slice(0,pos);var end=text.slice(pos+term.length);return'<span>'+start+'</span><span class="term">'+term+'</span><span>'+end+'</span>';}}
var partiesSettingsHash;var showParty=function(party){if(partiesSettingsHash===undefined){return party.x;}else{return partiesSettingsHash[party.i];}}
function getCookie(cname){var name=cname+"=";var decodedCookie=decodeURIComponent(document.cookie);var ca=decodedCookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' '){c=c.substring(1);}
if(c.indexOf(name)==0){return c.substring(name.length,c.length);}}
return"";}
function updateCookie(cname,value){var myDate=new Date();myDate.setMonth(myDate.getMonth()+12);document.cookie=cname+'='+value+';expires='+myDate+';domain='+window.location.hostname+';';}
var loadSettings=function(){var settingsCookie=getCookie('settings');if(settingsCookie){var settings=settingsCookie.split(',');partiesSettingsHash={};for(var i=0;i<settings.length;i++){partiesSettingsHash[settings[i]]=true;}
console.log(partiesSettingsHash);}}
var updateSettings=function(){var newSettings=[];var inputs=document.querySelectorAll('#qa-table .settings input')
for(var i=0;i<inputs.length;i++){var name=inputs[i].name;var checked=inputs[i].checked;if(checked){newSettings.push(name);}}
console.log(newSettings);updateCookie('settings',newSettings.join(','));}
document.addEventListener("DOMContentLoaded",function(event){var mainFont=new FontFaceObserver('Lato',{weight:400});mainFont.load().then(function(){document.documentElement.className+="fonts-ready";},function(){});var input=document.getElementById("search").getElementsByTagName('input')[0];input.focus();var partiskComplete=new autoComplete({selector:input,minChars:3,source:function(term,suggest){var request=new XMLHttpRequest();request.onreadystatechange=function(){console.log(request.responseText);if(request.readyState===4&&request.status===200){var data=JSON.parse(request.responseText);var result=[];suggest(data.suggestions);}}
request.open('GET',serviceUrl+"?query="+term,true);request.send();},renderItem:function(s,c){switch(s.data.type){case'q':return'<li class="autocomplete-suggestion" data-type="'+s.data.type+'" data-value="'+s.value+'"><i class="fa fa-question-circle-o"></i>'+splitText(s.value,c)+'</li>';case't':return'<li class="autocomplete-suggestion" data-type="'+s.data.type+'" data-value="'+s.value+'"><i class="fa fa-tag"></i>'+splitText(s.value,c)+'</li>';case'p':return'<li class="autocomplete-suggestion" data-type="'+s.data.type+'" data-value="'+s.value+'"><i class="fa fa-black-tie"></i>'+splitText(s.value,c)+'</li>';case'z':return'<li class="autocomplete-suggestion" data-type="'+s.data.type+'" data-value="'+s.value+'"><i class="fa fa-check-square"></i>'+splitText(s.value,c)+'</li>';}},onSelect:function(e,c,item){var t=item.dataset.type;var v=item.dataset.value;switch(t){case"q":window.location.replace(questionsUrl+v.replace(/ /g,"_").toLowerCase());break;case"t":window.location.replace(tagsUrl+v.replace(/ /g,"_").toLowerCase());break;case"p":window.location.replace(partiesUrl+v.replace(/ /g,"_").toLowerCase());break;case"z":window.location.replace(quizzesUrl+v.replace(/ /g,"_").toLowerCase());break;}}});});var indexPartyHash={};var items={};var indexRendered={};var questionHeight=64;var question_answers={};var questions=[];var noQuestions;var content;var no_parties;var initial_chunk_size=20;var chunk_size=50;var scrollIndexMargin=5;var drawQuestion=function(question){var trow=document.createElement('div');trow.setAttribute('class','trow');var tcol=document.createElement('div');tcol.setAttribute('class','tcol name');var a=document.createElement('a');a.setAttribute('href',questionsUrl+question.s);a.innerHTML=question.t;trow.appendChild(tcol);tcol.appendChild(a);for(var k=0;k<no_parties;k++){var answer=question_answers[question.i]&&question_answers[question.i][k];var party=indexPartyHash[k];if(showParty(party)){if(answer){var item=document.createElement('div');item.setAttribute('class',"tcol answer answer-type-"+answer);var itemA=document.createElement('a');itemA.setAttribute('href',answersUrl+question.s+'/'+party.s);itemA.innerHTML=answer===1?'ja':'nej';item.appendChild(itemA);trow.appendChild(item);}else{var item=document.createElement('div');item.setAttribute('class',"tcol answer empty");var itemI=document.createElement('i');itemI.setAttribute('class','fa fa-times');item.appendChild(itemI);trow.appendChild(item);}}}
return trow;}
var drawQuestions=function(scrollTop,offsetTop,windowHeight){var topIndex=Math.round((scrollTop-offsetTop)/questionHeight)-scrollIndexMargin;var bottomIndex=Math.round((scrollTop-offsetTop+windowHeight)/questionHeight)+scrollIndexMargin;for(var i=topIndex;i<=bottomIndex;i++){if(i>=0&&i<noQuestions&&!indexRendered[i]){items[i].replaceWith(drawQuestion(questions[i]));indexRendered[i]=true;}}}
document.addEventListener("DOMContentLoaded",function(event){if(typeof data!=='undefined'){questions=data.questions.sort((a,b)=>{if(a.t>b.t){return 1;}
if(a.t<b.t){return-1;}
return 0;});var question_index_map={}
no_parties=data.parties.length;for(var i=0;i<data.parties.length;i++){var party=data.parties[i];question_index_map[party.i]=i;indexPartyHash[i]=party;}
for(var i=0;i<data.answers.length;i++){var answer=data.answers[i];if(question_answers[answer.q]===undefined){question_answers[answer.q]={}}
if(question_index_map[answer.p]!==undefined){question_answers[answer.q][question_index_map[answer.p]]=answer.a;}}
var qaTable=document.getElementById('qa-table');loadSettings();var settings=document.createElement('ul');settings.setAttribute('class','settings');for(var i=0;i<data.parties.length;i++){var party=data.parties[i];var li=document.createElement('li');var input=document.createElement('input');input.setAttribute('type','checkbox');input.setAttribute('name',party.i);input.checked=showParty(party);input.addEventListener('click',function(){updateSettings();});li.appendChild(input);var text=document.createElement('span');text.innerText=party.n;li.appendChild(text);settings.appendChild(li);}
qaTable.appendChild(settings);var table=document.createElement(`div`);table.setAttribute('class','table');qaTable.appendChild(table);if(data.parties.length>1){var trowFiller=document.createElement('div');var tcolFiller=document.createElement('div');trowFiller.setAttribute('class','head trow');tcolFiller.setAttribute('class','tcol filler');trowFiller.appendChild(tcolFiller);qaTable.getElementsByClassName('table')[0].appendChild(trowFiller);for(var i=0;i<data.parties.length;i++){var party=data.parties[i];var tcol=document.createElement('div');var tcolA=document.createElement('a');var tcolPartyLogo=document.createElement('div');var tcolPartyLogoSmall=document.createElement('div');tcol.setAttribute('class','tcol table-logo');if(!showParty(party)){tcol.setAttribute('style','display: none');}
tcolA.setAttribute('href',partiesUrl+party.s);tcolPartyLogo.setAttribute('class','party-logo party-logo-'+party.i);tcolPartyLogoSmall.setAttribute('class','party-logo-small party-logo-small-'+party.i);tcol.appendChild(tcolA);tcolA.appendChild(tcolPartyLogo);tcolA.appendChild(tcolPartyLogoSmall);trowFiller.appendChild(tcol);}}
noQuestions=questions.length;var content=document.createElement('div');content.setAttribute('class','content');qaTable.getElementsByClassName("table")[0].appendChild(content);content.setAttribute('style','overflow: hidden; height: '+noQuestions*questionHeight+';');var doc=document.documentElement;var scrollTop=doc.scrollTop;var offsetTop=content.offsetTop;var windowHeight=document.body.clientHeight;for(var i=0;i<noQuestions;i++){var trow=document.createElement('div');trow.setAttribute('class','trow');trow.setAttribute('style',"height:"+questionHeight+"px");items[i]=trow
content.appendChild(items[i]);}
document.addEventListener("scroll",function(e){var scrollTop=doc.scrollTop;drawQuestions(scrollTop,offsetTop,windowHeight);});drawQuestions(scrollTop,offsetTop,windowHeight);}});;var Cookielaw={createCookie:function(name,value,days){var date=new Date(),expires='';if(days){date.setTime(date.getTime()+(days*24*60*60*1000));expires="; expires="+date.toGMTString();}else{expires="";}
document.cookie=name+"="+value+expires+"; path=/";},createCookielawCookie:function(){this.createCookie('cookielaw_accepted','1',10*365);if(typeof(window.jQuery)==='function'){jQuery('#CookielawBanner').slideUp();}else{document.getElementById('CookielawBanner').style.display='none';}}};